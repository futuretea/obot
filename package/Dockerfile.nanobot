FROM ghcr.io/nanobot-ai/nanobot:v0.0.50

USER root

# Copy your enterprise CA certificate
COPY enterprise-ca.crt /usr/local/share/ca-certificates/enterprise-ca.crt

# Merge enterprise CA with system CA bundle
# Wolfi doesn't have update-ca-certificates, so we concatenate manually
RUN cat /usr/local/share/ca-certificates/enterprise-ca.crt >> /etc/ssl/certs/ca-certificates.crt

# Only needed for Node.js runtime
ENV NODE_EXTRA_CA_CERTS=/usr/local/share/ca-certificates/enterprise-ca.crt
